<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ignite Type | Gamified Typing Trainer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />

    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="Typefire" />
    <link rel="manifest" href="/site.webmanifest" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700;800&family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body class="theme-cyberpunk show-fingers">

    <!-- Effects Overlay -->
    <div class="scanlines"></div>
    <div class="vignette"></div>

    <div class="mobile-blocker">
        <h1 class="text-2xl mb-4">SYSTEM ERROR</h1>
        <p>TERMINAL REQUIRES DESKTOP KEYBOARD INPUT</p>
    </div>

    <div class="app-container">
        <!-- TOP: Stats -->
        <div class="card area-stats">
            <div class="card-header">Session Stats</div>
            <div class="card-body">
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-label">WPM</span>
                        <span class="stat-value" id="stats-wpm">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Accuracy</span>
                        <span class="stat-value" id="stats-acc">100%</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Streak</span>
                        <span class="stat-value" id="stats-streak">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Time</span>
                        <span class="stat-value" id="stats-time">0:00</span>
                    </div>
                    <div class="stat-item cursor-pointer hover:text-[var(--accent)]" id="btn-theme">
                        <span class="stat-label">Theme [Alt+T]</span>
                        <span class="stat-value text-xs">CYCLE</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- LEFT: Pet -->
        <div class="card area-pet">
            <div class="card-header">COMPANION.EXE</div>
            <div class="card-body">
                <div class="pet-stage">
                    <svg class="pet-svg pet-idle" viewBox="0 0 100 100" id="pet-display">
                        <g class="body" fill="currentColor" style="color: var(--accent)">
                            <rect x="30" y="40" width="40" height="40" rx="5" />
                            <rect x="30" y="20" width="40" height="30" rx="8" />
                            <path d="M30 20 L20 5 L40 20 Z" />
                            <path d="M70 20 L80 5 L60 20 Z" />
                            <circle cx="40" cy="35" r="3" fill="var(--bg-color)" />
                            <circle cx="60" cy="35" r="3" fill="var(--bg-color)" />
                            <path d="M70 70 Q90 90 90 50" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" />
                        </g>
                    </svg>
                    <div class="mt-4 font-bold text-[var(--accent)]" id="pet-name">Pixel Cat</div>
                    <div class="text-xs opacity-60">Lvl 1 • Next: 40 WPM</div>
                    
                    <div class="progress-block">
                        <div class="flex justify-between text-xs mb-1 opacity-70">
                            <span>PROGRESS</span>
                            <span id="prog-pct">0%</span>
                        </div>
                        <div class="progress-track">
                            <div id="progress-bar" class="progress-bar"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- CENTER: Arena -->
        <div class="card area-arena">
            <div class="card-header">
                <span>TERMINAL_INPUT</span>
                <span class="ml-auto opacity-50" id="mode-indicator">MODE: F2 (ALPHA)</span>
            </div>
            <div class="card-body">
                <div class="arena-wrapper">
                    <div id="typing-text" class="text-display">INITIALIZING SYSTEM...</div>
                    <div id="combo-display" class="combo-counter">0x COMBO</div>
                </div>
            </div>
        </div>

        <!-- KEYBOARD -->
        <div class="card area-keyboard" id="keyboard-container">
            <div class="card-header">VISUAL_INTERFACE</div>
            <div class="card-body flex items-center justify-center">
                <canvas id="fire-canvas"></canvas>
                <div class="keyboard-wrapper" id="visual-keyboard">
                    <!-- JS Injected -->
                </div>
            </div>
        </div>

        <!-- FOOTER -->
        <div class="card area-bottom">
            <div class="card-body flex items-center justify-between px-6">
                <div class="font-bold">BEST: <span id="stat-best" class="text-[var(--accent)]">0</span> WPM</div>
                <div id="achievements-list" class="flex gap-2"></div>
                <div class="text-xs opacity-50 font-mono tracking-widest">[Alt+H] COMMANDS • [ESC] PAUSE</div>
            </div>
        </div>
    </div>

    <!-- MODALS -->
    <div id="help-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="card-header">SYSTEM_HELP</div>
            <div class="modal-inner">
                <h2 class="modal-title">KEY_COMMANDS</h2>
                <div class="grid grid-cols-2 gap-x-12 gap-y-4 text-left text-sm mb-8 w-full px-8">
                    <div class="flex justify-between"><span>Switch Mode</span> <span class="key-badge">F1-F5</span></div>
                    <div class="flex justify-between"><span>Cycle Theme</span> <span class="key-badge">Alt+T</span></div>
                    <div class="flex justify-between"><span>Toggle Sound</span> <span class="key-badge">Alt+S</span></div>
                    <div class="flex justify-between"><span>Toggle Fingers</span> <span class="key-badge">Alt+F</span></div>
                    <div class="flex justify-between"><span>Toggle Fire</span> <span class="key-badge">Alt+X</span></div>
                    <div class="flex justify-between"><span>Reset</span> <span class="key-badge">Alt+R</span></div>
                    <div class="flex justify-between"><span>Pause</span> <span class="key-badge">Esc</span></div>
                </div>
                <button id="btn-close-help" class="px-8 py-2 border border-[var(--accent)] text-[var(--accent)] hover:bg-[var(--accent)] hover:text-[var(--bg-color)] rounded font-bold transition-colors">CLOSE</button>
            </div>
        </div>
    </div>

    <div id="pause-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="card-header">SYSTEM_PAUSED</div>
            <div class="modal-inner">
                <h2 class="modal-title blink">WAITING FOR INPUT</h2>
                <button class="px-8 py-2 bg-[var(--accent)] text-[var(--bg-color)] rounded font-bold" id="resume-btn">RESUME</button>
            </div>
        </div>
    </div>

    <script type="module" src="/src/main.ts"></script>
</body>
</html>